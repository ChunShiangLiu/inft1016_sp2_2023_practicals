<!DOCTYPE html>
<html>
<head>
  <title>Medicine Programming</title>
  <style id="theme">
    /* Light Mode CSS */
    body {
      background-color: #f5f5f5;
      color: #333;
    }
    /* Dark Mode CSS */
    body.dark-mode {
      background-color: #333;
      color: #f5f5f5;
    }
  </style>
</head>
<body>
  <h1>Welcome to Medicine Programming</h1>
  
  <label for="name-input">Enter your name:</label>
  <input id="name-input" type="text">
  
  <p id="datetime"></p>
  
  <button id="theme-toggle">Toggle Theme</button>

  <script>
    // Function to toggle between light and dark mode
    function toggleTheme() {
      const body = document.body;
      body.classList.toggle("dark-mode");
      const theme = body.classList.contains("dark-mode") ? "Dark Mode" : "Light Mode";
      localStorage.setItem("theme", theme);
    }

    // Function to update the heading with the user's name
    function updateHeading() {
      const name = localStorage.getItem("name") || "Guest";
      document.querySelector("h1").textContent = `Welcome to Medicine Programming, ${name}!`;
    }

    // Function to display the current date and time
    function displayDateTime() {
      const now = new Date();
      const dateTimeString = now.toLocaleString();
      document.querySelector("#datetime").textContent = `Current Date and Time: ${dateTimeString}`;
    }

    // Event listener for theme toggle button
    document.querySelector("#theme-toggle").addEventListener("click", toggleTheme);

    // Event listener for name input
    document.querySelector("#name-input").addEventListener("input", function(e) {
      localStorage.setItem("name", e.target.value);
      updateHeading();
    });

    // Initial setup when the page loads
    updateHeading();
    displayDateTime();
    
    // Check if a theme preference is stored in local storage
    const storedTheme = localStorage.getItem("theme");
    if (storedTheme) {
      document.body.classList.add(storedTheme === "Dark Mode" ? "dark-mode" : "");
    }
  </script>
</body>
</html>
